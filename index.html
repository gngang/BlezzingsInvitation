<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>She Earned It!</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400;1,600&family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400&family=EB+Garamond:ital@0;1&display=swap" rel="stylesheet">
<style>
  :root {
    --cream: #ffffff;
    --cream-dark: #e8e8e8;
    --gold: #cc0000;
    --gold-light: #ff4444;
    --gold-dark: #990000;
    --ink: #0a0a0a;
    --ink-light: #444444;
    --shadow: rgba(0,0,0,0.3);
    --envelope-bg: #cc0000;
    --envelope-dark: #990000;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: #0a0a0a;
    background-image: 
      radial-gradient(ellipse at 20% 50%, #1a0000 0%, transparent 60%),
      radial-gradient(ellipse at 80% 20%, #0a0000 0%, transparent 50%);
    min-height: 100vh;
    font-family: 'Cormorant Garamond', Georgia, serif;
    color: var(--ink);
    overflow-x: hidden;
  }

  /* ── HERO / ENVELOPE SECTION ── */
  #hero {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px 20px 80px;
    position: relative;
  }

  .hero-label {
    font-family: 'Cormorant Garamond', serif;
    font-style: italic;
    font-size: 1.1rem;
    color: rgba(255,255,255,0.45);
    letter-spacing: 0.25em;
    text-transform: uppercase;
    margin-bottom: 48px;
    opacity: 0;
    animation: fadeUp 1s 0.3s ease forwards;
  }

  /* Outer wrapper just for sizing + entrance */
  .envelope-wrapper {
    position: relative;
    width: min(520px, 90vw);
    opacity: 0;
    animation: fadeUp 1s 0.6s ease forwards;
  }

  /* 
   * The scene: a perspective container so rotateX looks 3D 
   * The envelope sits inside and clips the card
   */
  .env-scene {
    position: relative;
    width: 100%;
    aspect-ratio: 1.618 / 1;
    perspective: 900px;
    filter: drop-shadow(0 24px 56px rgba(200,0,0,0.25)) drop-shadow(0 8px 24px rgba(0,0,0,0.6));
  }

  /* Envelope body — sits on z:3, covering the card behind it */
  .env-body {
    position: absolute;
    inset: 0;
    border-radius: 4px;
    background: #cc0000;
    z-index: 3; /* covers the card (z:2) while it's inside */
    /* NO overflow:hidden — card must be able to rise above */
  }

  /* SVG drawn as full-size layer inside env-body */
  .env-svg {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }

  /*
   * Card is a SIBLING of env-body (not a child), so overflow on env-body
   * cannot clip it. It lives behind env-body at z:2, fully hidden.
   * As it rises above the top edge of the envelope it becomes visible.
   *
   * Initial resting position: bottom-anchored, top fully below the scene top edge.
   * The card is 85% tall; env-scene is the reference. Card bottom at 5% from scene bottom.
   * So card top = 5% + 85% = 90% from top → well below scene top edge (hidden by env-body).
   */
  .env-card {
    position: absolute;
    bottom: 5%;
    left: 50%;
    transform: translateX(-50%);   /* fully behind env-body, not yet peeking */
    width: 78%;
    height: 85%;
    background: var(--cream);
    border-radius: 2px;
    z-index: 2;   /* behind env-body (z:3) */
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    box-shadow: 0 -8px 40px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,255,255,0.2);
    overflow: hidden;
    /* no default transition — state classes define timing */
  }

  /* lined paper texture */
  .env-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
      0deg, transparent, transparent 24px, rgba(0,0,0,0.05) 24px, rgba(0,0,0,0.05) 25px
    );
    pointer-events: none;
  }

  .env-card-inner {
    position: relative;
    text-align: center;
    padding: 24px;
    z-index: 1;
  }
  .env-card-inner .eyebrow {
    font-size: 0.6rem;
    letter-spacing: 0.35em;
    text-transform: uppercase;
    color: #cc0000;
    margin-bottom: 10px;
  }
  .env-card-inner .you-are-invited {
    font-family: 'Playfair Display', serif;
    font-size: clamp(1.4rem, 4vw, 2.2rem);
    font-style: italic;
    color: var(--ink);
    line-height: 1.2;
  }
  .env-card-inner .small-rule {
    width: 48px;
    height: 1px;
    background: #cc0000;
    margin: 12px auto;
    opacity: 0.9;
  }
  .env-card-inner .card-sub {
    font-size: 0.8rem;
    color: #555555;
    letter-spacing: 0.1em;
    font-style: italic;
  }

  /* 
   * Flap: sits above everything (z:5) until opened, then drops to z:0
   */
  .env-flap-wrap {
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 55%;
    transform-origin: top center;
    transform-style: preserve-3d;
    z-index: 5;
    transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    pointer-events: none;
  }

  /* Flap swings open */
  .env-scene.opened .env-flap-wrap {
    transform: rotateX(-175deg);
    z-index: 0;
    transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1),
                z-index 0s 0.8s;
  }

  /*
   * PEEK: card rises so ~25% of its top peeks above the envelope edge.
   * card bottom = 5% from scene bottom, card height = 85% of scene.
   * Scene top = 0. Card top starts at: 100% - 5% - 85% = 10% from scene top.
   * For 25% of card (≈21% of scene) to peek above scene top (0%):
   * card top must reach: 0% - 21% = -21% → move up by 10+21 = 31% of scene.
   * In terms of card's own height (85%): 31/85 ≈ 36.5% → translateY(-37%)
   */
  .env-scene.card-peek .env-card {
    transform: translateX(-50%) translateY(-37%);
    transition: transform 0.65s cubic-bezier(0.34, 1.4, 0.64, 1);
    z-index: 4; /* above env-body so the peeking top is visible */
  }

  /*
   * OUT: card fully pulled out, sitting above the envelope.
   * Bottom of card should clear the top of the envelope.
   * Card bottom starts at 5% from scene bottom = 95% from top.
   * Need card bottom above 0% (scene top) → move up by 95% of scene.
   * In card-own-height units: 95/85 ≈ 112% → translateY(-112%)
   * Add extra 12% padding for a nice float above: -124%
   */
  .env-scene.card-out .env-card {
    transform: translateX(-50%) translateY(-118%);
    transition: transform 0.9s cubic-bezier(0.22, 1, 0.36, 1);
    z-index: 4;
  }

  /* Wax seal */
  .wax-seal {
    position: absolute;
    /* centered on the fold line between flap and body */
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 64px;
    height: 64px;
    background: radial-gradient(circle at 38% 32%, #333 0%, #111 55%, #000 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 20px rgba(0,0,0,0.7), inset 0 2px 4px rgba(255,255,255,0.1), 0 0 0 2px rgba(255,255,255,0.15);
    z-index: 10;
    cursor: pointer;
    transition: transform 0.3s ease, box-shadow 0.3s ease, opacity 0.4s ease;
  }
  .wax-seal:hover {
    transform: translate(-50%, -50%) scale(1.1);
    box-shadow: 0 8px 28px rgba(0,0,0,0.6), inset 0 2px 4px rgba(255,255,255,0.2);
  }
  .wax-seal.broken {
    opacity: 0;
    pointer-events: none;
    transform: translate(-50%, -50%) scale(0.6) rotate(15deg);
  }
  .wax-seal-text {
    font-family: 'Playfair Display', serif;
    color: rgba(255,255,255,0.9);
    font-size: 0.55rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    pointer-events: none;
    user-select: none;
    text-align: center;
    line-height: 1.4;
  }

  /* Click hint below seal */
  .seal-hint {
    position: absolute;
    top: calc(50% + 42px);
    left: 50%;
    transform: translateX(-50%);
    z-index: 11;
    color: rgba(255,255,255,0.45);
    font-style: italic;
    font-size: 0.78rem;
    letter-spacing: 0.15em;
    white-space: nowrap;
    animation: pulse 2s 1.5s ease infinite;
    opacity: 0;
    animation: fadeUp 0.8s 1.5s ease forwards, pulse 2.5s 2.3s ease infinite;
    pointer-events: none;
  }

  .scroll-hint {
    margin-top: 52px;
    color: rgba(255,255,255,0.45);
    font-style: italic;
    font-size: 0.95rem;
    letter-spacing: 0.1em;
    display: none;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    animation: fadeUp 0.8s ease forwards, pulse 2.5s 0.8s ease infinite;
  }
  .scroll-hint.show { display: flex; }
  .scroll-hint .arrow {
    display: block;
    width: 1px;
    height: 32px;
    background: linear-gradient(to bottom, var(--gold-light), transparent);
  }

  /* ── INVITE CARD SECTION ── */
  #invite {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
  }

  .invite-card {
    background: var(--cream);
    width: min(560px, 92vw);
    padding: 64px 56px;
    position: relative;
    box-shadow: 0 32px 80px rgba(0,0,0,0.5), 0 4px 16px rgba(0,0,0,0.2);
    border-radius: 2px;
  }

  .invite-card::before {
    content: '';
    position: absolute;
    inset: 12px;
    border: 1px solid rgba(0,0,0,0.15);
    pointer-events: none;
    opacity: 1;
  }

  .invite-card::after {
    content: '';
    position: absolute;
    inset: 16px;
    border: 0.5px solid rgba(0,0,0,0.08);
    pointer-events: none;
    opacity: 1;
  }

  .invite-corner {
    position: absolute;
    width: 32px;
    height: 32px;
  }
  .invite-corner.tl { top: 6px; left: 6px; border-top: 2px solid #cc0000; border-left: 2px solid #cc0000; }
  .invite-corner.tr { top: 6px; right: 6px; border-top: 2px solid #cc0000; border-right: 2px solid #cc0000; }
  .invite-corner.bl { bottom: 6px; left: 6px; border-bottom: 2px solid #cc0000; border-left: 2px solid #cc0000; }
  .invite-corner.br { bottom: 6px; right: 6px; border-bottom: 2px solid #cc0000; border-right: 2px solid #cc0000; }

  .invite-eyebrow {
    text-align: center;
    font-size: 0.75rem;
    letter-spacing: 0.35em;
    text-transform: uppercase;
    color: #cc0000;
    margin-bottom: 24px;
  }

  .invite-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(2rem, 5vw, 3rem);
    font-style: italic;
    text-align: center;
    color: var(--ink);
    line-height: 1.15;
    margin-bottom: 8px;
  }

  .invite-divider {
    display: flex;
    align-items: center;
    gap: 16px;
    margin: 24px 0;
  }
  .invite-divider::before, .invite-divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: linear-gradient(to right, transparent, #cc0000, transparent);
  }
  .invite-divider-diamond {
    color: #cc0000;
    font-size: 0.6rem;
  }

  .invite-hosted {
    text-align: center;
    font-style: italic;
    color: var(--ink-light);
    font-size: 1.05rem;
    margin-bottom: 6px;
  }
  .invite-host-name {
    text-align: center;
    font-family: 'Playfair Display', serif;
    font-size: 1.5rem;
    color: var(--ink);
    margin-bottom: 28px;
  }

  .invite-details {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin: 28px 0;
  }
  .invite-detail {
    text-align: center;
  }
  .invite-detail-label {
    font-size: 0.65rem;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color: #cc0000;
    margin-bottom: 4px;
  }
  .invite-detail-value {
    font-family: 'Playfair Display', serif;
    font-size: 1.05rem;
    color: var(--ink);
  }

  .invite-note {
    text-align: center;
    font-style: italic;
    color: var(--ink-light);
    font-size: 0.9rem;
    margin-top: 24px;
    line-height: 1.6;
  }

  /* ── RSVP SECTION ── */
  #rsvp {
    min-height: 80vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
  }

  .rsvp-container {
    width: min(560px, 92vw);
  }

  .section-heading {
    font-family: 'Playfair Display', serif;
    font-size: clamp(1.8rem, 4vw, 2.6rem);
    font-style: italic;
    color: var(--cream);
    text-align: center;
    margin-bottom: 8px;
  }
  .section-sub {
    text-align: center;
    color: rgba(255,255,255,0.45);
    font-style: italic;
    margin-bottom: 40px;
    font-size: 0.95rem;
    letter-spacing: 0.08em;
  }

  .rsvp-card {
    background: var(--cream);
    padding: 48px 40px;
    border-radius: 2px;
    box-shadow: 0 24px 64px rgba(0,0,0,0.4);
    position: relative;
  }
  .rsvp-card::before {
    content: '';
    position: absolute;
    inset: 8px;
    border: 1px solid rgba(0,0,0,0.1);
    opacity: 1;
    pointer-events: none;
  }

  .rsvp-field {
    margin-bottom: 20px;
  }
  .rsvp-label {
    display: block;
    font-size: 0.7rem;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color: #cc0000;
    margin-bottom: 8px;
  }
  .rsvp-input {
    width: 100%;
    background: transparent;
    border: none;
    border-bottom: 1.5px solid #cccccc;
    padding: 8px 0;
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.1rem;
    color: var(--ink);
    outline: none;
    transition: border-color 0.3s;
  }
  .rsvp-input:focus { border-color: #cc0000; }

  .rsvp-choices {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 24px;
  }
  .rsvp-choice {
    border: 1.5px solid #cccccc;
    background: transparent;
    padding: 14px;
    cursor: pointer;
    font-family: 'Cormorant Garamond', serif;
    font-size: 1rem;
    color: var(--ink);
    text-align: center;
    transition: all 0.25s;
    border-radius: 1px;
    letter-spacing: 0.05em;
  }
  .rsvp-choice:hover { border-color: #cc0000; background: rgba(204,0,0,0.04); }
  .rsvp-choice.selected-yes { border-color: #cc0000; background: rgba(204,0,0,0.07); color: #cc0000; font-weight: 600; }
  .rsvp-choice.selected-no { border-color: #8b0000; background: rgba(139,0,0,0.06); color: #8b0000; }

  .rsvp-submit {
    width: 100%;
    background: #0a0a0a;
    color: #ffffff;
    border: none;
    padding: 16px;
    font-family: 'Playfair Display', serif;
    font-size: 1rem;
    font-style: italic;
    letter-spacing: 0.1em;
    cursor: pointer;
    transition: background 0.3s, transform 0.2s;
    margin-top: 8px;
  }
  .rsvp-submit:hover { background: #cc0000; transform: translateY(-1px); }
  .rsvp-submit:disabled { opacity: 0.5; cursor: default; transform: none; }

  .rsvp-message {
    text-align: center;
    font-style: italic;
    color: var(--gold-dark);
    margin-top: 16px;
    min-height: 24px;
    font-size: 1rem;
  }

  /* ── ATTENDEES SECTION ── */
  #attendees {
    padding: 60px 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .attendees-container {
    width: min(560px, 92vw);
  }

  .attendee-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 24px;
  }
  .attendee-item {
    background: rgba(245,240,232,0.07);
    border: 1px solid rgba(255,255,255,0.1);
    padding: 14px 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-radius: 1px;
    animation: fadeUp 0.4s ease forwards;
  }
  .attendee-name {
    font-family: 'Playfair Display', serif;
    color: var(--cream);
    font-size: 1.05rem;
  }
  .attendee-badge {
    font-size: 0.65rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: rgba(255,255,255,0.5);
    opacity: 1;
  }
  .attendee-badge.no {
    color: #c0392b;
  }

  .creator-toggle {
    text-align: center;
    margin-top: 16px;
  }
  .creator-toggle button {
    background: transparent;
    border: 1px solid rgba(255,255,255,0.2);
    color: rgba(255,255,255,0.5);
    padding: 8px 20px;
    font-family: 'Cormorant Garamond', serif;
    font-style: italic;
    cursor: pointer;
    font-size: 0.9rem;
    letter-spacing: 0.05em;
    transition: all 0.3s;
  }
  .creator-toggle button:hover { border-color: rgba(255,255,255,0.5); color: rgba(255,255,255,0.8); }

  .creator-modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    z-index: 100;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }
  .creator-modal.show { display: flex; }
  .creator-modal-inner {
    background: var(--cream);
    padding: 40px;
    width: min(380px, 90vw);
    text-align: center;
    box-shadow: 0 24px 64px rgba(0,0,0,0.5);
  }
  .creator-modal h3 {
    font-family: 'Playfair Display', serif;
    font-size: 1.4rem;
    font-style: italic;
    color: var(--ink);
    margin-bottom: 8px;
  }
  .creator-modal p {
    color: var(--ink-light);
    font-size: 0.9rem;
    margin-bottom: 20px;
    font-style: italic;
  }
  .creator-modal input {
    width: 100%;
    border: none;
    border-bottom: 1.5px solid var(--envelope-dark);
    padding: 10px 0;
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.1rem;
    color: var(--ink);
    text-align: center;
    outline: none;
    background: transparent;
    letter-spacing: 0.3em;
    margin-bottom: 20px;
  }
  .creator-modal .btn-row { display: flex; gap: 12px; }
  .creator-modal button {
    flex: 1;
    padding: 12px;
    font-family: 'Playfair Display', serif;
    font-style: italic;
    cursor: pointer;
    border: none;
    font-size: 0.95rem;
  }
  .btn-confirm { background: var(--ink); color: var(--cream); }
  .btn-cancel { background: transparent; border: 1px solid #cccccc !important; color: #333; }

  /* ── AGENDA SECTION ── */
  #agenda {
    padding: 60px 20px 100px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .agenda-container {
    width: min(560px, 92vw);
  }

  .agenda-card {
    background: var(--cream);
    padding: 48px 40px;
    border-radius: 2px;
    box-shadow: 0 24px 64px rgba(0,0,0,0.6);
    position: relative;
    margin-bottom: 24px;
  }
  .agenda-card::before {
    content: '';
    position: absolute;
    inset: 8px;
    border: 1px solid rgba(0,0,0,0.1);
    opacity: 1;
    pointer-events: none;
  }

  .agenda-items {
    list-style: none;
    border-left: 1.5px solid #cc0000;
    margin-left: 16px;
    padding-left: 24px;
    margin-top: 24px;
  }
  .agenda-item {
    position: relative;
    margin-bottom: 28px;
    color: var(--ink-light);
  }
  .agenda-item::before {
    content: '';
    position: absolute;
    left: -30px;
    top: 7px;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #cc0000;
    border: 2px solid white;
    box-shadow: 0 0 0 1px #cc0000;
  }
  .agenda-time {
    font-size: 0.65rem;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color: #cc0000;
    margin-bottom: 4px;
  }
  .agenda-event {
    font-family: 'Playfair Display', serif;
    font-size: 1.05rem;
    color: var(--ink);
    margin-bottom: 2px;
  }
  .agenda-desc {
    font-size: 0.9rem;
    font-style: italic;
    color: var(--ink-light);
  }

  .location-block {
    background: var(--cream);
    padding: 36px 40px;
    border-radius: 2px;
    box-shadow: 0 24px 64px rgba(0,0,0,0.4);
    position: relative;
    text-align: center;
  }
  .location-block::before {
    content: '';
    position: absolute;
    inset: 8px;
    border: 1px solid rgba(0,0,0,0.1);
    opacity: 1;
    pointer-events: none;
  }
  .location-name {
    font-family: 'Playfair Display', serif;
    font-size: 1.4rem;
    color: var(--ink);
    margin: 12px 0 4px;
  }
  .location-address {
    font-style: italic;
    color: var(--ink-light);
    font-size: 0.95rem;
    margin-bottom: 16px;
  }
  .location-map-link {
    display: inline-block;
    background: #0a0a0a;
    color: #ffffff;
    padding: 10px 24px;
    font-family: 'Playfair Display', serif;
    font-style: italic;
    font-size: 0.9rem;
    text-decoration: none;
    letter-spacing: 0.05em;
    transition: background 0.3s;
  }
  .location-map-link:hover { background: #990000; }

  /* ── ANIMATIONS ── */
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(24px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }
  @keyframes sealCrack {
    0% { transform: translate(-50%,-50%) scale(1) rotate(0deg); opacity: 1; }
    40% { transform: translate(-50%,-50%) scale(1.15) rotate(-8deg); opacity: 1; }
    100% { transform: translate(-50%,-50%) scale(0.5) rotate(20deg); opacity: 0; }
  }

  .reveal {
    opacity: 0;
    transform: translateY(32px);
    transition: opacity 0.7s ease, transform 0.7s ease;
  }
  .reveal.visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* Divider between sections */
  .section-rule {
    width: min(560px, 92vw);
    height: 1px;
    background: linear-gradient(to right, transparent, rgba(204,0,0,0.4), transparent);
    margin: 0 auto 60px;
  }
</style>
</head>
<body>

<!-- SECTION 1: ENVELOPE -->
<section id="hero">
  <p class="hero-label">A special invitation</p>

  <div class="envelope-wrapper">
    <!-- env-scene: perspective container, also clips card below horizon -->
    <div class="env-scene" id="envScene">

      <!-- Envelope body: visual shell only, z:3, covers card behind it -->
      <div class="env-body">
        <svg class="env-svg" viewBox="0 0 520 322" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="520" height="322" fill="#cc0000"/>
          <polygon points="0,0 0,322 270,180" fill="#a00000" opacity="0.7"/>
          <polygon points="520,0 520,322 250,180" fill="#8b0000" opacity="0.7"/>
          <polygon points="0,322 520,322 260,180" fill="#990000" opacity="0.9"/>
          <line x1="0" y1="322" x2="260" y2="180" stroke="#660000" stroke-width="0.6" opacity="0.6"/>
          <line x1="520" y1="322" x2="260" y2="180" stroke="#660000" stroke-width="0.6" opacity="0.6"/>
          <rect x="2" y="2" width="516" height="318" rx="3" fill="none" stroke="rgba(255,255,255,0.25)" stroke-width="0.8"/>
        </svg>
      </div>

      <!-- Card: SIBLING of env-body (not child!), starts behind it at z:2 -->
      <div class="env-card" id="envCard">
        <div class="env-card-inner">
          <div class="eyebrow">Cordially invited to celebrate</div>
          <div class="small-rule"></div>
          <div class="you-are-invited">Blezzing's<br>Graduation!</div>
          <div class="small-rule"></div>
          <div class="card-sub">June 20, 2026 · Black Tie</div>
        </div>
      </div>

      <!-- Flap: separate element on top, rotates via 3D -->
      <div class="env-flap-wrap" id="envFlap">
        <svg width="100%" height="100%" viewBox="0 0 520 180" fill="none" xmlns="http://www.w3.org/2000/svg" style="display:block;">
          <!-- Flap triangle -->
          <polygon points="0,0 520,0 260,170" fill="#dd1111"/>
          <!-- Flap shading for depth -->
          <polygon points="0,0 260,170 130,0" fill="#880000" opacity="0.5"/>
          <polygon points="520,0 260,170 390,0" fill="#660000" opacity="0.4"/>
          <!-- Gold liner -->
          <polygon points="6,0 514,0 260,161" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="0.8"/>
          <!-- Bottom edge of flap (the crease) -->
          <line x1="0" y1="0" x2="520" y2="0" stroke="rgba(0,0,0,0.3)" stroke-width="1"/>
        </svg>
      </div>

      <!-- Wax seal: sits at the fold point (center of envelope height) -->
      <div class="wax-seal" id="waxSeal" onclick="openEnvelope()">
        <div class="wax-seal-text">Open<br>me</div>
      </div>

      <!-- Subtle click hint -->
      <div class="seal-hint">tap the seal</div>
    </div>
  </div>

  <div class="scroll-hint" id="scrollHint">
    <span>Scroll to see the details</span>
    <span class="arrow"></span>
  </div>
</section>

<!-- SECTION 2: INVITATION CARD -->
<section id="invite">
  <div class="invite-card reveal">
    <div class="invite-corner tl"></div>
    <div class="invite-corner tr"></div>
    <div class="invite-corner bl"></div>
    <div class="invite-corner br"></div>

    <p class="invite-eyebrow">You are cordially invited to celebrate</p>
    <h1 class="invite-title">Blezzing's<br>Graduation Party</h1>

    <div class="invite-divider"><span class="invite-divider-diamond">◆</span></div>

    <p class="invite-hosted" style="font-size:1.5rem; font-family:'Playfair Display',serif; font-style:italic; color:#cc0000; font-weight:600;">She Ea<span style="text-transform:uppercase;font-size:1.1em;">rn</span>ed It!</p>

    <div class="invite-divider"><span class="invite-divider-diamond">◆</span></div>

    <div class="invite-details">
      <div class="invite-detail">
        <div class="invite-detail-label">Date</div>
        <div class="invite-detail-value">Saturday, June 20th, 2026</div>
      </div>
      <div class="invite-detail">
        <div class="invite-detail-label">Time</div>
        <div class="invite-detail-value">5:00 PM – 9:00 PM</div>
      </div>
    </div>

    <p class="invite-note">
      Dress code: Black Tie — dress nice<br>
      Kindly RSVP below
    </p>
  </div>
</section>

<!-- SECTION 3: RSVP -->
<section id="rsvp">
  <div class="rsvp-container">
    <h2 class="section-heading reveal">Will you join us?</h2>
    <p class="section-sub reveal">Let us know you're coming</p>

    <div class="rsvp-card reveal">
      <div class="rsvp-field">
        <label class="rsvp-label" for="rsvpName">Your Name</label>
        <input class="rsvp-input" id="rsvpName" type="text" placeholder="Full name" autocomplete="name">
      </div>
      <div class="rsvp-field">
        <label class="rsvp-label">Your Response</label>
        <div class="rsvp-choices">
          <button class="rsvp-choice" id="btnYes" onclick="selectRsvp('yes')">
            ✓ &nbsp; Joyfully accepts
          </button>
          <button class="rsvp-choice" id="btnNo" onclick="selectRsvp('no')">
            ✗ &nbsp; Regretfully declines
          </button>
        </div>
      </div>
      <button class="rsvp-submit" id="rsvpSubmit" onclick="submitRsvp()">Send my reply →</button>
      <p class="rsvp-message" id="rsvpMsg"></p>
    </div>

    <!-- Attendees live right below the form — no scrolling needed -->
    <div style="margin-top: 48px;">
      <h3 style="font-family:'Playfair Display',serif; font-size:1.4rem; font-style:italic; color:white; text-align:center; margin-bottom:6px;">
        Who's coming <span id="attendeeCount" style="font-size:1rem; color:#cc0000; font-style:normal;"></span>
      </h3>
      <p style="text-align:center; color:rgba(255,255,255,0.4); font-style:italic; font-size:0.9rem; margin-bottom:20px;">Guests who have confirmed</p>

      <div class="attendee-list" id="attendeeList">
        <p style="color:rgba(255,255,255,0.3); font-style:italic; text-align:center; font-size:0.95rem; padding:16px 0;">
          No replies yet — be the first!
        </p>
      </div>

      <div style="text-align:center; margin-top:16px;">
        <button onclick="showCreatorModal()" style="background:transparent; border:1px solid rgba(255,255,255,0.2); color:rgba(255,255,255,0.5); padding:8px 20px; font-family:'Cormorant Garamond',serif; font-style:italic; cursor:pointer; font-size:0.9rem; letter-spacing:0.05em; transition:all 0.3s;" onmouseover="this.style.borderColor='rgba(255,255,255,0.5)';this.style.color='rgba(255,255,255,0.8)'" onmouseout="this.style.borderColor='rgba(255,255,255,0.2)';this.style.color='rgba(255,255,255,0.5)'">
          Creator view — see all replies
        </button>
      </div>
    </div>
  </div>
</section>

<!-- SECTION 4: ATTENDEES (kept for anchor but hidden) -->
<section id="attendees" style="display:none;"></section>

<!-- SECTION 5: AGENDA & LOCATION -->
<section id="agenda">
  <div class="section-rule"></div>
  <div class="agenda-container">
    <h2 class="section-heading reveal">Schedule of Events</h2>
    <p class="section-sub reveal">The evening at a glance</p>

    <div class="agenda-card reveal">
      <ul class="agenda-items">
        <li class="agenda-item">
          <div class="agenda-time">4:45 PM</div>
          <div class="agenda-event">Welcome In</div>
          <div class="agenda-desc">Mimosas &amp; mingle</div>
        </li>
        <li class="agenda-item">
          <div class="agenda-time">5:00 PM</div>
          <div class="agenda-event">Dinner</div>
          <div class="agenda-desc">Welcome speech &amp; food</div>
        </li>
        <li class="agenda-item">
          <div class="agenda-time">5:30 – 9:00 PM</div>
          <div class="agenda-event">Party Time</div>
          <div class="agenda-desc">Dance! Celebrate! Have fun!</div>
        </li>
      </ul>
    </div>

    <div class="location-block reveal" style="margin-top: 24px;">
      <div style="font-size:1.8rem;">✦</div>
      <div class="location-name">19410 Middlebelt Rd</div>
      <div class="location-address">Livonia, MI 48152</div>
      <a class="location-map-link" href="https://maps.google.com/?q=19410+Middlebelt+Rd,+Livonia,+MI+48152" target="_blank">Open in Maps →</a>
    </div>
  </div>
</section>

<!-- CREATOR MODAL -->
<div class="creator-modal" id="creatorModal">
  <div class="creator-modal-inner">
    <h3>Creator Access</h3>
    <p>Enter your creator PIN to view all RSVPs including declines</p>
    <input type="password" id="creatorPin" placeholder="· · · ·" maxlength="6" autocomplete="off">
    <div class="btn-row">
      <button class="btn-cancel" onclick="hideCreatorModal()">Cancel</button>
      <button class="btn-confirm" onclick="checkCreatorPin()">Enter</button>
    </div>
    <p id="pinError" style="color:#8b0000; font-size:0.85rem; margin-top:12px; font-style:italic;"></p>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script>
  // ── CONFIG ──────────────────────────────────────────
  const CREATOR_PIN = '1234';  // Change this!
  const STORAGE_KEY = 'rsvp-invite-guests-v1';

  // ── EMAILJS CONFIG ───────────────────────────────────
  // 1. Sign up free at emailjs.com
  // 2. Add Email Service (connect Gmail) → paste Service ID below
  // 3. Create Email Template → paste Template ID below
  // 4. Account → API Keys → paste Public Key below
  const EMAILJS_PUBLIC_KEY  = 'txMxmJGO7Dw_3jINS';
  const EMAILJS_SERVICE_ID  = 'service_mi3m8t4';
  const EMAILJS_TEMPLATE_ID = 'YOUR_TEMPLATE_ID';  // ← still need this from EmailJS
  const NOTIFY_EMAIL        = 'blezzingnzama@gmail.com';

  // Init EmailJS
  emailjs.init({ publicKey: EMAILJS_PUBLIC_KEY });
  
  // ── STATE ───────────────────────────────────────────
  let rsvpChoice = null;
  let creatorMode = false;
  let submittedName = null;

  // ── ENVELOPE ────────────────────────────────────────
  function openEnvelope() {
    const scene = document.getElementById('envScene');
    const seal  = document.getElementById('waxSeal');
    const hint  = document.getElementById('scrollHint');
    if (scene.classList.contains('opened')) return;

    // Step 1: crack the seal (0ms)
    seal.style.animation = 'sealCrack 0.45s cubic-bezier(0.4,0,0.2,1) forwards';
    seal.style.pointerEvents = 'none';

    // Step 2: flap swings open (300ms, takes 0.8s)
    setTimeout(() => {
      scene.classList.add('opened');
    }, 300);

    // Step 3: card peeks — just the top edge rises above envelope (1200ms)
    setTimeout(() => {
      scene.classList.add('card-peek');
    }, 1200);

    // Step 4: card fully pulled out (1900ms)
    setTimeout(() => {
      scene.classList.add('card-out');
    }, 1900);

    // Step 5: show scroll hint (2900ms)
    setTimeout(() => {
      hint.classList.add('show');
    }, 2900);
  }

  // ── RSVP CHOICE ─────────────────────────────────────
  function selectRsvp(choice) {
    rsvpChoice = choice;
    document.getElementById('btnYes').className = 'rsvp-choice' + (choice === 'yes' ? ' selected-yes' : '');
    document.getElementById('btnNo').className = 'rsvp-choice' + (choice === 'no' ? ' selected-no' : '');
  }

  // ── STORAGE HELPERS ─────────────────────────────────
  async function loadGuests() {
    try {
      const result = await window.storage.get(STORAGE_KEY, true);
      return result ? JSON.parse(result.value) : [];
    } catch { return []; }
  }

  async function saveGuests(guests) {
    try {
      await window.storage.set(STORAGE_KEY, JSON.stringify(guests), true);
    } catch(e) { console.error('Storage error', e); }
  }

  // ── SUBMIT ──────────────────────────────────────────
  async function submitRsvp() {
    const name = document.getElementById('rsvpName').value.trim();
    const msg = document.getElementById('rsvpMsg');

    if (!name) { msg.textContent = 'Please enter your name.'; return; }
    if (!rsvpChoice) { msg.textContent = 'Please select a response.'; return; }

    const btn = document.getElementById('rsvpSubmit');
    btn.disabled = true;
    btn.textContent = 'Sending…';
    msg.textContent = '';

    let guests = [];
    try {
      guests = await loadGuests();
    } catch(e) {
      console.error('Load error:', e);
    }

    // Update if already exists
    const idx = guests.findIndex(g => g.name.toLowerCase() === name.toLowerCase());
    const isUpdate = idx >= 0;
    if (isUpdate) {
      guests[idx].attending = rsvpChoice === 'yes';
      guests[idx].updatedAt = Date.now();
    } else {
      guests.push({ name, attending: rsvpChoice === 'yes', createdAt: Date.now() });
    }

    try {
      await saveGuests(guests);
    } catch(e) {
      console.error('Save error:', e);
      msg.textContent = 'Something went wrong saving your RSVP. Please try again.';
      msg.style.color = '#cc0000';
      btn.disabled = false;
      btn.textContent = 'Send my reply →';
      return;
    }

    submittedName = name;

    // ── Send email notification via EmailJS ─────────
    if (EMAILJS_TEMPLATE_ID !== 'YOUR_TEMPLATE_ID') {
      try {
        await emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, {
          to_email:   NOTIFY_EMAIL,
          guest_name: name,
          response:   rsvpChoice === 'yes' ? '✅ Attending' : '❌ Not attending',
          event:      "Blezzing's Graduation Party — She EaRNed It!",
          event_date: 'June 20, 2026 · 5:00 PM – 9:00 PM',
          is_update:  isUpdate ? '(updated response)' : '(new RSVP)',
          timestamp:  new Date().toLocaleString('en-US', { timeZone: 'America/Detroit' }),
        });
      } catch (emailErr) {
        console.warn('Email failed (RSVP still saved):', emailErr);
      }
    }

    if (rsvpChoice === 'yes') {
      msg.textContent = '✦ Amazing! We cannot wait to celebrate with you.';
      msg.style.color = '#cc0000';
    } else {
      msg.textContent = 'We are sorry you cannot make it. Thank you for letting us know.';
      msg.style.color = '#8b0000';
    }

    btn.textContent = 'Reply sent ✓';

    // Re-render attendees immediately
    await renderAttendees();
  }

  // ── RENDER ATTENDEES ────────────────────────────────
  async function renderAttendees() {
    let guests = [];
    try { guests = await loadGuests(); } catch(e) { console.error('renderAttendees load error:', e); }

    const list = document.getElementById('attendeeList');
    list.innerHTML = '';

    // Always show attendees section — no scroll reveal needed
    document.querySelectorAll('#attendees .reveal').forEach(el => el.classList.add('visible'));

    const visible = creatorMode ? guests : guests.filter(g => g.attending);
    const attendingCount = guests.filter(g => g.attending).length;

    const countEl = document.getElementById('attendeeCount');
    if (countEl) countEl.textContent = attendingCount > 0 ? `${attendingCount} going` : '';

    if (visible.length === 0) {
      list.innerHTML = '<p style="color:rgba(255,255,255,0.3); font-style:italic; text-align:center; font-size:0.95rem; padding:16px 0;">No replies yet — be the first!</p>';
      return;
    }

    visible.forEach(g => {
      const item = document.createElement('div');
      item.className = 'attendee-item';
      const badge = g.attending
        ? '<span class="attendee-badge" style="color:#cc0000">Attending ✓</span>'
        : '<span class="attendee-badge no">Declined</span>';
      item.innerHTML = `<span class="attendee-name">${escapeHtml(g.name)}</span>${badge}`;
      list.appendChild(item);
    });
  }

  function escapeHtml(s) {
    return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
  }

  // ── CREATOR MODAL ───────────────────────────────────
  function showCreatorModal() {
    if (creatorMode) { creatorMode = false; renderAttendees(); return; }
    document.getElementById('creatorModal').classList.add('show');
    document.getElementById('creatorPin').value = '';
    document.getElementById('pinError').textContent = '';
    setTimeout(() => document.getElementById('creatorPin').focus(), 100);
  }

  function hideCreatorModal() {
    document.getElementById('creatorModal').classList.remove('show');
  }

  function checkCreatorPin() {
    const pin = document.getElementById('creatorPin').value;
    if (pin === CREATOR_PIN) {
      creatorMode = true;
      hideCreatorModal();
      renderAttendees();
      document.querySelector('.creator-toggle button').textContent = 'Hide declined guests';
    } else {
      document.getElementById('pinError').textContent = 'Incorrect PIN.';
    }
  }

  document.getElementById('creatorPin').addEventListener('keydown', e => {
    if (e.key === 'Enter') checkCreatorPin();
  });

  // Close modal on backdrop click
  document.getElementById('creatorModal').addEventListener('click', function(e) {
    if (e.target === this) hideCreatorModal();
  });

  // ── SCROLL REVEAL ────────────────────────────────────
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(e => {
      if (e.isIntersecting) {
        e.target.classList.add('visible');
        observer.unobserve(e.target);
      }
    });
  }, { threshold: 0.15 });

  document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

  // ── INIT ─────────────────────────────────────────────
  renderAttendees();
</script>
</body>
</html>
